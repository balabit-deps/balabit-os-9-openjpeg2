From 0afbdcf3e6d0d2bd2e16a0c4d513ee3cf86e460d Mon Sep 17 00:00:00 2001
From: xiaoxiaoafeifei <lliangliang2007@163.com>
Date: Wed, 14 Jul 2021 09:35:13 +0800
Subject: [PATCH] Fix segfault in src/bin/jp2/opj_decompress.c due to
 uninitialized pointer (fixes #1368) (#1369)

---
 src/bin/jp2/opj_decompress.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: openjpeg2-2.4.0/src/bin/jp2/opj_decompress.c
===================================================================
--- openjpeg2-2.4.0.orig/src/bin/jp2/opj_decompress.c
+++ openjpeg2-2.4.0/src/bin/jp2/opj_decompress.c
@@ -1350,7 +1350,7 @@ int main(int argc, char **argv)
     if (img_fol.set_imgdir == 1) {
         int it_image;
         num_images = get_num_images(img_fol.imgdirpath);
-        dirptr = (dircnt_t*)malloc(sizeof(dircnt_t));
+        dirptr = (dircnt_t*)calloc(1, sizeof(dircnt_t));
         if (!dirptr) {
             destroy_parameters(&parameters);
             return EXIT_FAILURE;
